<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation - BoutiqueComplete1</title>
    <!-- Inline script to prevent FOUC -->
    <script>
        (function () {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/docs/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <!-- Sidebar Navigation (Duplicated from App to maintain look) -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon"><i class='bx bxs-store'></i></span>
                <span class="logo-text">Boutique<span class="accent">Complete</span></span>
            </div>
        </div>
        <nav class="sidebar-nav">
            <a href="/" class="nav-link">
                <span class="nav-icon"><i class='bx bxs-dashboard'></i></span>
                <span>Dashboard</span>
            </a>
            <a href="/products" class="nav-link">
                <span class="nav-icon"><i class='bx bxs-package'></i></span>
                <span>Produits</span>
            </a>
            <a href="/orders" class="nav-link">
                <span class="nav-icon"><i class='bx bxs-receipt'></i></span>
                <span>Commandes</span>
            </a>
            <a href="/aggregation" class="nav-link">
                <span class="nav-icon"><i class='bx bxs-chart'></i></span>
                <span>Statistiques</span>
            </a>
            <a href="/search" class="nav-link">
                <span class="nav-icon"><i class='bx bxs-search'></i></span>
                <span>Recherche</span>
            </a>
            <a href="/documentation" class="nav-link active">
                <span class="nav-icon"><i class='bx bxs-book-content'></i></span>
                <span>Architecture</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <div class="db-status">
                <span class="status-dot"></span>
                <span>MongoDB Connected</span>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header class="top-header">
            <h1 class="page-title">Documentation Technique</h1>
            <div class="header-actions">
                <button id="theme-toggle" class="btn-icon" aria-label="Toggle Theme">
                    <i class='bx bxs-moon'></i>
                </button>
            </div>
        </header>

        <div class="content-area docs-wrapper">
            <!-- Documentation Table of Contents -->
            <nav class="docs-nav">
                <ul>
                    <li><a href="#vue-globale" class="active">1. Vue Globale</a></li>
                    <li><a href="#architecture">2. Architecture</a></li>
                    <li><a href="#communication">3. Communication</a></li>
                    <li><a href="#flux">4. Flux d'ExÃ©cution</a></li>
                    <li><a href="#donnees">5. Gestion des DonnÃ©es</a></li>
                    <li><a href="#fichiers">6. RÃ´le des Fichiers</a></li>
                    <li><a href="#technologies">7. Technologies</a></li>
                    <li><a href="#logique">8. Logique MÃ©tier</a></li>
                </ul>
            </nav>

            <!-- Documentation Content -->
            <div class="docs-content">

                <!-- 1. Vue Globale -->
                <section id="vue-globale" class="doc-section">
                    <h2><i class='bx bxs-planet'></i> 1. Vue Globale du Projet</h2>
                    <p>Ce projet est une application de gestion de boutique en ligne (E-commerce) minimaliste mais
                        complÃ¨te. Il dÃ©montre comment construire une application web moderne avec une base de donnÃ©es
                        NoSQL puissante.</p>

                    <h3>ðŸŽ¯ Objectif</h3>
                    <p>L'objectif est double :</p>
                    <ul>
                        <li><strong>Technique :</strong> Montrer l'intÃ©gration parfaite entre Python (Flask) et MongoDB.
                        </li>
                        <li><strong>PÃ©dagogique :</strong> Servir de modÃ¨le "propre" pour apprendre le dÃ©veloppement
                            Fullstack.</li>
                    </ul>

                    <h3>ðŸ‘¥ Ã€ quoi Ã§a sert ?</h3>
                    <p>L'application permet Ã  un administrateur de boutique de :</p>
                    <ul>
                        <li>GÃ©rer son catalogue (CRUD Produits).</li>
                        <li>GÃ©rer ses commandes clients (Embedding vs Linking).</li>
                        <li>Voir des statistiques de vente en temps rÃ©el (AgrÃ©gations).</li>
                    </ul>

                    <h3>ðŸ‘‹ Public Cible</h3>
                    <p>DÃ©veloppeurs dÃ©butants Ã  intermÃ©diaires, Ã©tudiants, ou toute personne voulant comprendre comment
                        une vraie application web fonctionne sous le capot sans la complexitÃ© des gros frameworks comme
                        React/Angular.</p>
                </section>

                <!-- 2. Architecture -->
                <section id="architecture" class="doc-section">
                    <h2><i class='bx bxs-building-house'></i> 2. Architecture du Projet</h2>
                    <p>L'architecture suit le modÃ¨le <strong>MVC (ModÃ¨le - Vue - ContrÃ´leur)</strong> adaptÃ© Ã  Flask.
                    </p>

                    <h3>ðŸ“‚ Arborescence</h3>
                    <div class="file-tree">
                        <div class="tree-item folder"><i class='bx bxs-folder'></i> boutique-mongodb-flask/</div>
                        <div class="tree-item"><span style="margin-left: 20px;">â”œâ”€â”€ ðŸ“„ app.py (Le Cerveau /
                                ContrÃ´leur)</span></div>
                        <div class="tree-item folder"><span style="margin-left: 20px;">â”œâ”€â”€ ðŸ“‚ templates/ (Les Vues /
                                HTML)</span></div>
                        <div class="tree-item"><span style="margin-left: 40px;">â”‚ â”œâ”€â”€ ðŸ“„ base.html</span></div>
                        <div class="tree-item"><span style="margin-left: 40px;">â”‚ â”œâ”€â”€ ðŸ“„ index.html</span></div>
                        <div class="tree-item"><span style="margin-left: 40px;">â”‚ â”œâ”€â”€ ðŸ“„ products.html</span></div>
                        <div class="tree-item"><span style="margin-left: 40px;">â”‚ â””â”€â”€ ...</span></div>
                        <div class="tree-item folder"><span style="margin-left: 20px;">â”œâ”€â”€ ðŸ“‚ static/ (Les
                                Assets)</span></div>
                        <div class="tree-item"><span style="margin-left: 40px;">â”‚ â”œâ”€â”€ ðŸ“‚ css/</span></div>
                        <div class="tree-item"><span style="margin-left: 40px;">â”‚ â””â”€â”€ ðŸ“‚ js/</span></div>
                        <div class="tree-item folder"><span style="margin-left: 20px;">â”œâ”€â”€ ðŸ“‚ docs/ (La
                                Documentation)</span></div>
                        <div class="tree-item"><span style="margin-left: 20px;">â”œâ”€â”€ ðŸ“„ db_init.py (Script
                                d'initialisation)</span></div>
                        <div class="tree-item"><span style="margin-left: 20px;">â””â”€â”€ ðŸ“„ requirements.txt</span></div>
                    </div>
                </section>

                <!-- 3. Communication -->
                <section id="communication" class="doc-section">
                    <h2><i class='bx bxs-network-chart'></i> 3. Communication entre les parties</h2>

                    <h3>Frontend â†” Backend</h3>
                    <p>Le dialogue se fait via <strong>HTTP</strong> et <strong>JSON</strong>.</p>
                    <div class="code-block-wrapper">
                        <div class="code-header">
                            <span class="lang-badge">Flux de DonnÃ©es</span>
                        </div>
                        <pre><code>Navigateur (JS)  ----(Requete JSON)--->  Flask (Python)
Navigateur       <---(Reponse JSON)----  Flask</code></pre>
                    </div>
                    <p>Le Frontend ne parle <strong>jamais</strong> directement Ã  la base de donnÃ©es. Il demande
                        poliment au Backend de le faire.</p>

                    <h3>Python â†” MongoDB</h3>
                    <p>Python utilise le driver <code>pymongo</code> pour envoyer des ordres Ã  la base de donnÃ©es via le
                        protocole TCP (Port 27017).</p>
                </section>

                <!-- 4. Flux -->
                <section id="flux" class="doc-section">
                    <h2><i class='bx bx-run'></i> 4. Flux dâ€™ExÃ©cution</h2>

                    <h3>ðŸš€ DÃ©marrage</h3>
                    <ol>
                        <li>Lancement de <code>python app.py</code>.</li>
                        <li>Flask initialise la connexion MongoDB.</li>
                        <li>Le serveur Ã©coute sur le port 5000.</li>
                    </ol>

                    <h3>ðŸ”„ Cycle de Vie d'une RequÃªte</h3>
                    <p>Prenons l'affichage de la liste des produits :</p>
                    <ol>
                        <li>L'utilisateur va sur <code>/products</code>.</li>
                        <li>Flask renvoie le fichier HTML <code>products.html</code>.</li>
                        <li>Le navigateur lit le HTML et voit une balise <code>&lt;script&gt;</code>.</li>
                        <li>Le JavaScript s'exÃ©cute et fait un appel <code>fetch('/api/products')</code>.</li>
                        <li>Flask reÃ§oit cette demande, interroge MongoDB, et renvoie le JSON.</li>
                        <li>Le JavaScript reÃ§oit le JSON et dessine le tableau HTML.</li>
                    </ol>
                </section>

                <!-- 5. DonnÃ©es -->
                <section id="donnees" class="doc-section">
                    <h2><i class='bx bxs-data'></i> 5. Gestion des DonnÃ©es</h2>

                    <h3>Stockage</h3>
                    <p>Les donnÃ©es sont stockÃ©es non pas dans des tables (comme SQL), mais dans des
                        <strong>Collections</strong> de <strong>Documents JSON</strong> (BSON).
                    </p>

                    <h3>Collections Principales</h3>
                    <ul>
                        <li><strong>Produits</strong> : Le catalogue magasin.</li>
                        <li><strong>CommandesEmbedding</strong> : Commandes tout-en-un (panier inclus). Rapide Ã  lire.
                        </li>
                        <li><strong>CommandesLinking</strong> : Commandes par rÃ©fÃ©rence. Mieux pour la cohÃ©rence des
                            donnÃ©es.</li>
                        <li><strong>Clients</strong> : Liste des acheteurs.</li>
                    </ul>

                    <h3>ðŸ’¡ Types de DonnÃ©es</h3>
                    <div class="tech-grid">
                        <div class="tech-card" style="padding: 1rem;">
                            <strong>String</strong><br><small>Noms, Desc</small>
                        </div>
                        <div class="tech-card" style="padding: 1rem;">
                            <strong>Number</strong><br><small>Prix, Stock</small>
                        </div>
                        <div class="tech-card" style="padding: 1rem;">
                            <strong>Array</strong><br><small>Tags, Listes</small>
                        </div>
                        <div class="tech-card" style="padding: 1rem;">
                            <strong>ObjectId</strong><br><small>ID Unique</small>
                        </div>
                    </div>
                </section>

                <!-- 6. Fichiers -->
                <section id="fichiers" class="doc-section">
                    <h2><i class='bx bxs-file-doc'></i> 6. RÃ´le des Fichiers</h2>

                    <h3><code>app.py</code></h3>
                    <p>Le chef d'orchestre (ContrÃ´leur). Il contient toutes les routes serveurs (`@app.route`), la
                        logique d'API REST, et assure la validation des donnÃ©es reÃ§ues avant de les confier Ã  MongoDB.
                    </p>

                    <h3><code>db_init.py</code></h3>
                    <p>L'Initialisateur. Il construit les fondations de la base de donnÃ©es en injectant un jeu de
                        donnÃ©es initial complet, indispensable pour tester l'affichage et les fonctionnalitÃ©s dÃ¨s le
                        dÃ©marrage.</p>

                    <h3><code>db_ops.sh</code></h3>
                    <p>Le logisticien. Un script Bash pour sauvegarder (Export) et restaurer (Import) toutes les donnÃ©es
                        de la base en JSON.</p>

                    <h3><code>static/js/main.js</code></h3>
                    <p>Le moteur interactif Frontend. Il gÃ¨re la communication asynchrone avec le Backend (via
                        <code>fetch</code>), affiche les notifications (Toasts), contrÃ´le le thÃ¨me (Clair/Sombre) et
                        gÃ¨re les modales.</p>

                    <h3><code>templates/</code></h3>
                    <p>Les Vues (HTML/Jinja2). Ce sont les squelettes des pages qui dÃ©finissent la structure visuelle,
                        hÃ©ritant toutes du modÃ¨le maÃ®tre <code>base.html</code> pour une cohÃ©rence graphique parfaite.
                    </p>
                </section>

                <!-- 7. Technologies -->
                <section id="technologies" class="doc-section">
                    <h2><i class='bx bxs-microchip'></i> 7. Technologies UtilisÃ©es</h2>
                    <div class="tech-grid">
                        <div class="tech-card">
                            <i class='bx bxl-python tech-icon'></i>
                            <div class="tech-name">Python & Flask</div>
                            <div class="tech-desc">Le langage Backend et son framework web lÃ©ger.</div>
                        </div>
                        <div class="tech-card">
                            <i class='bx bxl-mongodb tech-icon'></i>
                            <div class="tech-name">MongoDB</div>
                            <div class="tech-desc">La base de donnÃ©es NoSQL flexible et performante.</div>
                        </div>
                        <div class="tech-card">
                            <i class='bx bxl-html5 tech-icon'></i>
                            <div class="tech-name">HTML5 & CSS3</div>
                            <div class="tech-desc">La structure et le style moderne de l'interface.</div>
                        </div>
                        <div class="tech-card">
                            <i class='bx bxl-javascript tech-icon'></i>
                            <div class="tech-name">JavaScript</div>
                            <div class="tech-desc">La logique Frontend pour l'interactivitÃ©.</div>
                        </div>
                    </div>
                </section>

                <!-- 8. Logique MÃ©tier -->
                <section id="logique" class="doc-section">
                    <h2><i class='bx bxs-brain'></i> 8. Logique MÃ©tier</h2>

                    <h3>Fonctionnement Fonctionnel</h3>
                    <p>L'application gÃ¨re le cycle de vie complet d'un produit :</p>
                    <ol>
                        <li><strong>EntrÃ©e en stock :</strong> CrÃ©ation via le formulaire "Nouveau Produit".</li>
                        <li><strong>Mise en vente :</strong> Le produit apparaÃ®t dans le catalogue.</li>
                        <li><strong>Vente :</strong> Lorsqu'une commande est crÃ©Ã©e, les statistiques de vente sont mises
                            Ã  jour.</li>
                        <li><strong>Gestion :</strong> Modification des prix ou suppression en cas de rupture
                            dÃ©finitive.</li>
                    </ol>

                    <h3>Cas d'Usage : Le Panier</h3>
                    <p>Quand une commande est passÃ©e :</p>
                    <ul>
                        <li>On vÃ©rifie (thÃ©oriquement) le stock.</li>
                        <li>On calcule le total (Prix x QuantitÃ©).</li>
                        <li>On crÃ©e un document Commande.</li>
                        <li>On met Ã  jour les tableaux de bord.</li>
                    </ul>
                </section>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="/static/js/main.js"></script>
    <script src="/docs/script.js"></script>
</body>

</html>